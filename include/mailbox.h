#ifndef __MAILBOX_H__
#define __MAILBOX_H__
//#include<stdarg.h>
#include"mydef.h"

struct _mailbox 
{
    word_t read_write;
    word_t reserved[3];
	word_t peek;
    word_t sender;
	word_t status;
    word_t config;
};

struct mailbox_registers
{
    struct _mailbox box[2];
};


typedef enum {
	MB_CHANNEL_POWER = 0x0,								
	MB_CHANNEL_FB = 0x1,								
	MB_CHANNEL_VUART = 0x2,								
	MB_CHANNEL_VCHIQ = 0x3,								
	MB_CHANNEL_LEDS = 0x4,								
	MB_CHANNEL_BUTTONS = 0x5,							
	MB_CHANNEL_TOUCH = 0x6,								
	MB_CHANNEL_COUNT = 0x7,								
	MB_CHANNEL_TAGS = 0x8,								
	MB_CHANNEL_GPU = 0x9,								
} MAILBOX_CHANNEL;


typedef enum{
 MAILBOX_GET_FIRMWARE_VER       = 0x00000001,
 MAILBOX_GET_BOARD_MODEL        = 0x00010001,
 MAILBOX_GET_BOARD_REVISION     = 0x00010002,
 MAILBOX_GET_MAC_ADDR           = 0x00010003,
 MAILBOX_GET_BOARD_SERIAL       = 0x00010004,
 MAILBOX_GET_ARM_MEM            = 0x00010005,
 MAILBOX_GET_VC_MEM             = 0x00010006,
 MAILBOX_GET_CLOCKS             = 0x00010007,
 MAILBOX_GET_COMMAND_LINE       = 0x00050001,
 MAILBOX_GET_DMA_CHANNEL        = 0x00060001,
 MAILBOX_GET_POWER_STATE        = 0x00020001,
 MAILBOX_GET_TIMING             = 0x00020002,
 MAILBOX_SET_POWER_STATE        = 0x00028001,
 MAILBOX_GET_CLOCK_STATE        = 0x00030001,
 MAILBOX_SET_CLOCK_STATE        = 0x00038001,
 MAILBOX_GET_CLOCK_RATE         = 0x00030002,
 MAILBOX_GET_ONBOARD_LED_STATUS = 0x00030041,
 MAILBOX_TEST_ONBOARD_LED_STATUS= 0x00034041,
 MAILBOX_SET_ONBOARD_LED_STATUS = 0x00038041,
 MAILBOX_GET_CLOCK_RATE_MEASURED= 0x00030047,
 MAILBOX_SET_CLOCK_RATE         = 0x00038002,
 MAILBOX_GET_MAX_CLOCK_RATE     = 0x00030004,
 MAILBOX_GET_MIN_CLOCK_RATE     = 0x00030007,
 MAILBOX_GET_TURBO              = 0x00030009,
 MAILBOX_SET_TURBO              = 0x00038009,
 MAILBOX_GET_VOLTAGE            = 0x00030003,
 MAILBOX_SET_VOLTAGE            = 0x00038003,
 MAILBOX_GET_MAX_VOLTAGE        = 0x00030005,
 MAILBOX_GET_MIN_VOLTAGE        = 0x00030008,
 MAILBOX_GET_TEMP               = 0x00030006,
 MAILBOX_GET_MAX_TEMP           = 0x0003000a,
 MAILBOX_ALLOCATE_MEM           = 0x0003000c,
 MAILBOX_LOCK_MEMORY            = 0x0003000d,
 MAILBOX_UNLOCK_MEMORY          = 0x0003000e,
 MAILBOX_RELEASE_MEMORY         = 0x0003000f,
 MAILBOX_EXECUTE_CODE           = 0x00030010,
 MAILBOX_ALLOCATE_BUFFER        = 0x00040001,
 MAILBOX_RELEASE_BUFFER         = 0x00048001,
 MAILBOX_BLANK_SCREEN           = 0x00040002,
 MAILBOX_GET_PHYSICAL_WH        = 0x00040003,
 MAILBOX_TEST_PHYSICAL_WH       = 0x00044003,
 MAILBOX_SET_PHYSICAL_WH        = 0x00048003,
 MAILBOX_GET_VIRTUAL_WH         = 0x00040004,
 MAILBOX_TEST_VIRTUAL_WH        = 0x00044004,
 MAILBOX_SET_VIRTUAL_WH         = 0x00048004,
 MAILBOX_GET_DEPTH              = 0x00040005,
 MAILBOX_TEST_DEPTH             = 0x00044005,
 MAILBOX_SET_DEPTH              = 0x00040006,
 MAILBOX_TEST_PIXEL_ORDER       = 0x00044006,
 MAILBOX_SET_PIXEL_ORDER        = 0x00048006,
 MAILBOX_GET_ALPHA_MODE         = 0x00040007,
 MAILBOX_TEST_ALPHA_MODE        = 0x00048007,
 MAILBOX_GET_PITCH              = 0x00040008,
 MAILBOX_GET_VIRTUAL_OFFSET     = 0x00040009,
 MAILBOX_TEST_VIRTUAL_OFFSET    = 0x00044009,
 MAILBOX_SET_VIRTUAL_OFFSET     = 0x00048009,
 MAILBOX_GET_OVERSCAN           = 0x0004000a,
 MAILBOX_TEST_OVERSCAN          = 0x0004400a,
 MAILBOX_SET_OVERSCAN           = 0x0004800a,
 MAILBOX_GET_PALETTE            = 0x0004000b,
 MAILBOX_TEST_PALETTE           = 0x0004400b,
 MAILBOX_SET_PALETTE            = 0x0004800b,
 MAILBOX_SET_CURSOR_INFO        = 0x00008010,
 MAILBOX_SET_CURSOR_STATE       = 0x00008011,
 MAILBOX_SET_SCREEN_GAMMA       = 0x00008012,
 MAILBOX_GET_EDID_BLOCK         = 0x00030020,
} MAILBOX_TAG;

int mailbox_process(word_t*,uint8_t,...);
#endif